# task-1

## Огляд

Цей проєкт містить два DAG-и для Airflow:

1. **`generate_orders_dag`**  
   Генерує випадкові замовлення та вставляє їх у таблицю orders в базі даних postgres-1. Цей процес виконується кожні 10 хвилин.

2. **`convert_orders_to_eur_dag`**  
   Конвертує нові замовлення з різних валют у євро (EUR) та вставляє сконвертовані дані в нову базу даних (postgres-2). Цей процес виконується щогодини.


Проєкт використовує Docker Compose для управління середовищем, включаючи бази даних Postgres та сервіс Airflow.

---

## Структура Проєкту

### Директорії та Файли
- `dags/`: Містить DAG-и для Airflow (`convert_orders_to_eur_dag.py`, `generate_orders_dag.py`).
- `utils.py`: Допоміжні функції для взаємодії з базами даних, API-запитів та обробки даних.
- `.env`: Змінні середовища для налаштування баз даних, API-ключів та інших конфігурацій.
- `docker-compose.yml`: Файл Docker Compose для налаштування необхідних сервісів.

---

## Опис DAG-ів

### `generate_orders_dag`
- **Опис**:  
  Генерує 5 000 випадкових замовлень кожні 10 хвилин та вставляє їх у таблицю orders у postgres-1.

- **Розклад**: Кожні 10 хвилин (`*/10 * * * *`).
- **Завдання**:
  1. Переконатися, що таблиця orders існує.
  2. Отримати валюти з API OpenExchangeRates.
  3. Згенерувати випадкові замовлення.
  4. Вставити згенеровані замовлення у таблицю orders.

### `convert_orders_to_eur_dag`
- **Опис**:  
  Отримує нові замовлення з таблиці orders у базі postgres-1, конвертує їх суми у EUR за допомогою API OpenExchangeRates, і зберігає результати в таблиці orders_eur у базі postgres-2.

- **Розклад**: Щогодини  (`0 * * * *`).
- **Завдання**:
  1. Отримати курси валют з API OpenExchangeRates.
  2. Отримати нові замовлення з таблиці orders у postgres-1.
  3. Конвертувати замовлення у EUR.
  4. Вставити сконвертовані замовлення у таблицю orders_eur у postgres-2.

---

## Змінні Середовища

Налаштуйте змінну OPENEXCHANGE_API_KEY (ваш API-ключ для OpenExchangeRates) у файлі .env, щоб конфігурувати API, з метою безпеки прибрав свій